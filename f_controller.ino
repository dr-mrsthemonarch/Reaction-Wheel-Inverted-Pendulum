void lqrMotor(float lqrSignal) {
  float pwm = atp(lqrSignal);
  ledcWrite(ledChannel, pwm);
}

float update_nssm1(float * u)
{
  static float x[1] = {0};
  float x1[1];
  float  yr = -19.29011363209436 * x[0] - 9.64505681604718 * u[0] -  51.43920939855402 * u[1] - 0.0023436028729053883 * u[2];
  x1[0] = 0.4545454545454546 * x[0] + 0.7272727272727273 * u[0];
  x[0] = x1[0];
  return yr;
}

float update_nssm2(float * u)
{
  static float x[2] = {0, 0};
  float x1[2];
  float yr = -0.0779157927095553 * x[0] - 2.6942136486445736 * x[1] - 0.03895789635477765 * u[0] - 1.3471068243222868 * u[1] + 0.017026540590970217 * u[2];
  x1[0] = 0.9985011241568822 * x[0] + 0.9992505620784411 * u[0];
  x1[1] = 0.9277108433734939 * x[1] + 0.9638554216867469 * u[1];
  x[0] = x1[0];
  x[1] = x1[1];
  return yr;
}

float update_nssm3(float * u)
{
//float yr = -29.06845749899338*( -PI + u[0]) - 35.358025698923434*u[1] + 0.004896466395431149*u[2];
//float yr = -30.06845749899338*(u[0]) - 35.358025698923434*u[1] + 0.004896466395431149*u[2];
float yr = -21.38242718885382*( -PI + u[0]) - 3.9061389490800011*u[1] + 0.0048964663969374165*u[2];
//float yr = -46.480473247484305 * u[0] - 31.79495710710166 * u[1] + 0.015362402263117702 * u[2];
  return yr;
}
